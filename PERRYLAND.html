HTML<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Citas para Mascotas</title>
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .header-container {
            background-color: #fff;
            padding: 15px 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .logo-container {
            flex-shrink: 0;
        }

        .logo {
            height: 60px;
            width: auto;
        }

        .contact-info {
            display: flex;
            align-items: center;
            gap: 20px;
            text-align: right;
        }

        .social-links a {
            color: #3498db; /* Azul */
            font-size: 1.5em;
            margin-left: 15px;
            transition: color 0.3s;
        }
        .social-links a:hover {
            color: #2980b9; /* Azul oscuro */
        }

        .whatsapp-contact {
            font-size: 1.1em;
            font-weight: bold;
            color: #25D366;
        }
        .whatsapp-contact i {
            margin-right: 8px;
        }

        .main-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .container {
            background-color: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }

        h1, h2 {
            color: #3498db; /* Azul */
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        input, select, textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #3498db; /* Azul */
            outline: none;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .radio-group label {
            font-weight: normal;
            margin-right: 15px;
        }
        .radio-group input[type="radio"] {
            margin-right: 5px;
        }

        button {
            background-color: #3498db; /* Azul */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #2980b9; /* Azul oscuro */
        }

        #calendar-container {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        #calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        #calendar-header button {
            background-color: #5dade2; /* Azul claro */
            padding: 8px 12px;
            font-size: 0.9em;
            width: auto;
        }
        #calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }
        .calendar-day {
            padding: 10px 5px;
            border: 1px solid #eee;
            border-radius: 4px;
            background-color: #fff;
            font-size: 0.9em;
            position: relative;
        }
        .calendar-day.has-appointment::after {
            content: '';
            display: block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #e74c3c;
            position: absolute;
            top: 5px;
            right: 5px;
        }
        .calendar-day.empty {
            background-color: transparent;
            border: none;
        }
        .day-name {
            font-weight: bold;
            color: #333;
            padding: 8px 0;
        }


        #appointments-list-container h3 {
            color: #3498db; /* Azul */
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 8px;
        }
        .appointment-item {
            background-color: #eaf2f8; /* Fondo azul muy claro */
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 5px solid #3498db; /* Azul */
            font-size: 0.95em;
        }
        .appointment-item p {
            margin: 5px 0;
        }
        .appointment-item strong {
            color: #2980b9; /* Azul oscuro */
        }

        .hidden {
            display: none;
        }

        .message {
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            text-align: center;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <header class="header-container">
        <div class="logo-container">
            <!-- Reemplaza el src con el link de tu logo en GitHub u otro hosting -->
            <img src="https://placehold.co/150x60/3498db/ffffff?text=Tu+Logo" alt="Logo del Negocio" class="logo">
        </div>
        <div class="contact-info">
            <div class="whatsapp-contact">
                <i class="fab fa-whatsapp"></i>
                <span>55-1234-5678</span>
            </div>
            <div class="social-links">
                <!-- Reemplaza # con los enlaces a tus redes sociales -->
                <a href="#" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <h1>üêæ Control de Citas para Mascotas üêæ</h1>
            <div id="message-area"></div>

            <form id="appointmentForm">
                <h2>Registrar Nueva Cita</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="clientName">Nombre del Cliente:</label>
                        <input type="text" id="clientName" name="clientName" required>
                    </div>

                    <div class="form-group">
                        <label for="petName">Nombre del Perrito:</label>
                        <input type="text" id="petName" name="petName" required>
                    </div>

                    <div class="form-group">
                        <label for="clientPhone">N√∫mero de Tel√©fono (10 d√≠gitos):</label>
                        <input type="text" id="clientPhone" name="clientPhone" pattern="\d{10}" title="Debe contener 10 d√≠gitos num√©ricos" maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '');" required>
                    </div>

                    <div class="form-group">
                        <label for="serviceType">Tipo de Servicio:</label>
                        <select id="serviceType" name="serviceType" required>
                            <option value="">Seleccione un servicio...</option>
                            <option value="paseo">Paseo de Perrito</option>
                            <option value="ba√±o">Ba√±o de Perrito</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="appointmentDate">Fecha de la Cita:</label>
                        <input type="date" id="appointmentDate" name="appointmentDate" required>
                    </div>

                    <div class="form-group">
                        <label for="appointmentTime">Hora de la Cita:</label>
                        <input type="time" id="appointmentTime" name="appointmentTime" required step="1800">
                    </div>
                </div>

                <div class="form-group">
                    <label>Ubicaci√≥n del Servicio:</label>
                    <div class="radio-group">
                        <input type="radio" id="locationEstablishment" name="serviceLocation" value="establecimiento" checked>
                        <label for="locationEstablishment">En Establecimiento</label>
                        <input type="radio" id="locationHome" name="serviceLocation" value="domicilio">
                        <label for="locationHome">A Domicilio</label>
                    </div>
                </div>

                <div class="form-group hidden" id="addressGroup">
                    <label for="clientAddress">Direcci√≥n del Cliente (para servicio a domicilio):</label>
                    <textarea id="clientAddress" name="clientAddress" placeholder="Calle, N√∫mero, Colonia, C√≥digo Postal..."></textarea>
                </div>

                <div class="form-group">
                    <label for="specialRequirements">Requerimientos Especiales del Perrito:</label>
                    <textarea id="specialRequirements" name="specialRequirements" placeholder="Ej: Es reactivo con otros perros, muerde al ba√±arse, tiene alergias, etc." required></textarea>
                </div>

                <button type="submit">Agendar Cita</button>
            </form>
        </div>

        <div class="container">
            <h2>Calendario de Citas</h2>
            <div id="calendar-container">
                <div id="calendar-header">
                    <button id="prevMonthBtn">&lt; Mes Anterior</button>
                    <h3 id="currentMonthYear"></h3>
                    <button id="nextMonthBtn">Mes Siguiente &gt;</button>
                </div>
                <div id="calendar-day-names"></div>
                <div id="calendar-days"></div>
            </div>
        </div>
        
        <div class="container">
            <div id="appointments-list-container">
                <h3>Pr√≥ximas Citas Agendadas</h3>
                <div id="appointmentsList">
                    <p>No hay citas programadas a√∫n.</p>
                </div>
            </div>
        </div>
    </main>
    <script>
        const appointmentForm = document.getElementById('appointmentForm');
        const appointmentsListDiv = document.getElementById('appointmentsList');
        const addressGroup = document.getElementById('addressGroup');
        const serviceLocationRadios = document.querySelectorAll('input[name="serviceLocation"]');
        const messageArea = document.getElementById('message-area');
        
        const calendarDaysContainer = document.getElementById('calendar-days');
        const currentMonthYearElement = document.getElementById('currentMonthYear');
        const prevMonthBtn = document.getElementById('prevMonthBtn');
        const nextMonthBtn = document.getElementById('nextMonthBtn');
        const calendarDayNamesContainer = document.getElementById('calendar-day-names');

        let appointments = []; // Aqu√≠ guardaremos las citas
        let currentCalendarDate = new Date();

        const SERVICE_DURATION_MINUTES = 60; 

        // --- L√≥gica del Calendario ---
        function renderCalendar() {
            calendarDaysContainer.innerHTML = '';
            calendarDayNamesContainer.innerHTML = '';
            const month = currentCalendarDate.getMonth();
            const year = currentCalendarDate.getFullYear();

            currentMonthYearElement.textContent = `${currentCalendarDate.toLocaleString('es-ES', { month: 'long' })} ${year}`;

            const dayNames = ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'];
            dayNames.forEach(name => {
                const dayNameDiv = document.createElement('div');
                dayNameDiv.classList.add('day-name');
                dayNameDiv.textContent = name;
                calendarDayNamesContainer.appendChild(dayNameDiv);
            });
            
            const firstDayOfMonth = new Date(year, month, 1);
            const lastDayOfMonth = new Date(year, month + 1, 0);
            const daysInMonth = lastDayOfMonth.getDate();
            let startingDay = firstDayOfMonth.getDay(); 
            if (startingDay === 0) startingDay = 7;
            startingDay--;

            for (let i = 0; i < startingDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.classList.add('calendar-day', 'empty');
                calendarDaysContainer.appendChild(emptyDiv);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.classList.add('calendar-day');
                dayDiv.textContent = day;
                dayDiv.dataset.date = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                const dateStr = dayDiv.dataset.date;
                if (appointments.some(app => app.date === dateStr)) {
                    dayDiv.classList.add('has-appointment');
                }
                
                dayDiv.addEventListener('click', () => {
                    document.getElementById('appointmentDate').value = dateStr;
                });
                calendarDaysContainer.appendChild(dayDiv);
            }
        }

        prevMonthBtn.addEventListener('click', () => {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
            renderCalendar();
        });

        // --- L√≥gica de Citas ---
        serviceLocationRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                const addressInput = document.getElementById('clientAddress');
                if (this.value === 'domicilio') {
                    addressGroup.classList.remove('hidden');
                    addressInput.required = true;
                } else {
                    addressGroup.classList.add('hidden');
                    addressInput.required = false;
                }
            });
        });
        
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('appointmentDate').setAttribute('min', today);

        appointmentForm.addEventListener('submit', function(event) {
            event.preventDefault();
            clearMessages();

            const formData = new FormData(appointmentForm);
            const data = Object.fromEntries(formData.entries());

            const newAppointmentDateTime = new Date(`${data.appointmentDate}T${data.appointmentTime}`);
            
            if (newAppointmentDateTime < new Date()) {
                 displayMessage('No puedes agendar una cita en una fecha u hora pasada.', 'error');
                 return;
            }

            if (isOverlapping(newAppointmentDateTime)) {
                displayMessage('Error: La hora seleccionada ya est√° ocupada o se traslapa con otra cita. Por favor, elija otra hora.', 'error');
                return;
            }

            const newAppointment = {
                id: Date.now(),
                clientName: data.clientName,
                petName: data.petName,
                clientPhone: data.clientPhone,
                serviceType: data.serviceType,
                date: data.appointmentDate,
                time: data.appointmentTime,
                dateTime: newAppointmentDateTime,
                serviceLocation: data.serviceLocation,
                clientAddress: data.serviceLocation === 'domicilio' ? data.clientAddress : '',
                specialRequirements: data.specialRequirements
            };

            appointments.push(newAppointment);
            appointments.sort((a, b) => a.dateTime - b.dateTime);

            displayMessage('¬°Cita agendada con √©xito!', 'success');
            renderAppointmentsList();
            renderCalendar();
            appointmentForm.reset();
            addressGroup.classList.add('hidden');
            document.getElementById('clientAddress').required = false;
            document.getElementById('appointmentDate').setAttribute('min', today);
        });

        function isOverlapping(newAppointmentDateTime) {
            const newAppointmentStart = newAppointmentDateTime.getTime();
            const newAppointmentEnd = newAppointmentStart + (SERVICE_DURATION_MINUTES * 60 * 1000);

            for (const existingApp of appointments) {
                const existingAppStart = existingApp.dateTime.getTime();
                const existingAppEnd = existingAppStart + (SERVICE_DURATION_MINUTES * 60 * 1000);
                if (newAppointmentStart < existingAppEnd && newAppointmentEnd > existingAppStart) {
                    return true;
                }
            }
            return false;
        }

        function renderAppointmentsList() {
            if (appointments.length === 0) {
                appointmentsListDiv.innerHTML = '<p>No hay citas programadas a√∫n.</p>';
                return;
            }

            appointmentsListDiv.innerHTML = '';
            appointments.forEach(app => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('appointment-item');
                
                const formattedDate = new Date(app.date + 'T00:00:00').toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                const serviceTypeText = app.serviceType.charAt(0).toUpperCase() + app.serviceType.slice(1);
                const locationText = app.serviceLocation === 'domicilio' ? `A Domicilio (${app.clientAddress})` : 'En Establecimiento';

                itemDiv.innerHTML = `
                    <p><strong>Cliente:</strong> ${app.clientName} - <strong>Mascota:</strong> ${app.petName}</p>
                    <p><strong>Servicio:</strong> ${serviceTypeText}</p>
                    <p><strong>Fecha y Hora:</strong> ${formattedDate} a las ${app.time}</p>
                    <p><strong>Tel√©fono:</strong> ${app.clientPhone}</p>
                    <p><strong>Ubicaci√≥n:</strong> ${locationText}</p>
                    <p><strong>Requerimientos Especiales:</strong> ${app.specialRequirements}</p>
                `;
                appointmentsListDiv.appendChild(itemDiv);
            });
        }

        function displayMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = message;
            messageArea.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        function clearMessages() {
            messageArea.innerHTML = '';
        }

        // Inicializar
        renderCalendar();
        renderAppointmentsList();
    </script>
</body>
</html>